
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose
.dtd">
<html>
<head>
<link rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="css/style2.css" type="text/css">
<meta name="keywords" content="keyboard, layout, typing, effort, qwerty, dvorak, colemak, arensito, capewell, best layout, worst layout, custom layout, simulated annealing, monte carlo, simulation">
<title>Carpalx - keyboard layout optimizer</title>

<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:400,700,800|PT+Serif:400,400italic,700|Inconsolata:400,700">

</head>

<body>

<div id="body">

<div id="page">

<div id="masthead">
<a href="index.html@.html"><img src="images/carpalx-logo-v3-crop.png" alt="carpalx - keyboard layout optimizer - save your carpals"></a>
</div>


<div id="leftpane">

<div id="slogan">



<p>Carpalx optimizes keyboard layouts to create ones that require less effort and significantly reduced carpal strain!

<p><a href="index.html@full_optimization.html"><img src="images/carpalx-ourbest.png"></a>
<p><a href="index.html@worst_layout.html"><img src="images/carpalx-ourworst.png"></a>

<p><img src="images/download.png" style="float:left; padding: 0 0.25em 0 0;"><a href="index.html@download.html">Download keyboard layouts</a>, or <a href="index.html@requirements.html">run the code yourself</a> to explore new layouts.

<p><img src="images/x.png" style="float:left; padding: 0 0.25em 0 0;"><b>X11 layouts are available!</b> Patches to include Carpalx layouts in <a href="https://www.freedesktop.org/wiki/Software/XKeyboardConfig/">xkeyboard-config</a> and <a href="http://kbd-project.org/">kbd</a> have been submitted by Perry Thompson. Meanwhile, many thanks to Sven Hallberg for providing <a href="http://www.khjk.org/log/2011/jan/carpalx.html">X11 configuration for Carpalx layouts</a>. Richard Gomes contributed an <a href="http://mkweb.bcgsc.ca/carpalx/distribution/carpalx-x11.zip">archive of these files</a> for KDE/Gnome users. 

<p><img src="images/happy.png" style="float:left; padding: 0 0.25em 0 0;">Love your coworkers? Switch them to <a href="index.html@partial_optimization.html">QWKRFY</a> layout or a fully optimized <a href="index.html@full_optimization.html">QGMLWY</a> layout.

<p><img src="images/sad.png" style="float:left; padding: 0 0.25em 0 0;">Hate your coworkers? Switch them to  <a href="index.html@worst_layout.html">TNWMLC</a> layout. It's the only keyboard layout that has its <a href="http://fashionnotebook.wordpress.com/2011/01/04/julia-valle-tnwmlc/">own fashion line</a>.

<p>Have ideas? <a href="mailto:martin.krzywinski@gmail.com">Tell me</a>.

</div>

<div id="menu">


<h1>carpalx</h1>
<a href="index.html@home.html">home</a>
<a href="index.html@about.html">about</a>
<a href="index.html@typing_effort.html">typing effort</a>
<a href="index.html@model_parameters.html">model parameters</a>
<a href="index.html@keyboard_evaluation.html">keyboard evaluation</a>
<a href="index.html@keyboard_layouts.html">keyboard layouts</a>
<h1>case studies</h1>
<a href="index.html@qwerty.html">QWERTY</a>
<a href="index.html@dvorak.html">Dvorak</a>
<a href="index.html@colemak.html">Colemak</a>
<a href="index.html@popular_alternatives.html">Popular alternatives</a>
<h1>optimization</h1>
<a href="index.html@partial_optimization.html">Partial optimization</a>
<a href="index.html@full_optimization.html">Full optimization</a>
<a href="index.html@worst_layout.html">Worst Layout</a>
<a href="index.html@component_optimization.html">Component optimization</a>
<a href="index.html@improving_colemak.html">Improving colemak</a>
<a href="index.html@de_correspondent.html">De Correspondent</a>
<h1>tutorials</h1>
<a href="index.html@simulated_annealing.html">simulated annealing</a>
<a href="index.html@carpalx_installation.html">carpalx installation</a>
<a href="index.html@keyboard_statistics.html">keyboard statistics</a>
<a href="index.html@word_statistics.html">word statistics</a>
<a href="index.html@basic_optimization.html">basic optimization</a>
<a href="index.html@concurrent_optimization.html">concurrent optimization</a>
<a href="index.html@keyboard_images.html">keyboard images</a>
<a class=current href="index.html@interpreting_optimization.html">interpreting optimization</a>
<h1>documentation</h1>
<a href="index.html@readme.html">README</a>
<a href="index.html@changes.html">CHANGES</a>
<a href="index.html@man_page.html">man page</a>
<h1>download</h1>
<a href="index.html@requirements.html">requirements</a>
<a href="index.html@download.html">download</a>
<h1>author</h1>
<a href="index.html@contact.html">contact</a>
<a href="index.html@other_projects.html">other projects</a>




</div>


<div id="footer">
Carpalx is licensed under GPL. It is free, freely distributable and yours to modify under the auspices of the GPL license.


</div>
</div>

<div id="rightpane">




<div class=update>
<p>16/aug/16 &mdash; <a href="http://link.springer.com/chapter/10.1007/978-3-319-41694-6_41">Ergonomic Keyboard Layout Designed for the Filipino Language</a> at <a href="http://www.ahfe2016.org/program1.html">AHFE2016</a> derives layout for Filipino language using Carpalx 
<p>18/apr/16 &mdash; Carpalx layouts soon to appear in freedesktop (package xkeyboard-config) and kbd. Thanks to Perry Thompson.
<p>9/sep/14 &mdash; A new layout&mdash;<a href="index.html@de_correspondent.html">De Correspondent</a>&mdash;for the Dutch language in collaboration with <a href="https://decorrespondent.nl/en">De Correspondent</a>.
<p>16/may/14 &mdash; Added <a href="index.html@full_optimization.html">evaluation</a> of the <a href="http://www.normanlayout.info">Norman layout</a>. This layout modifies 14/26 keys and has statistics similar to Colemak. <a href="index.html@keyboard_layouts.html">Detailed statistics</a> are available.
<p>12/feb/14 &mdash; Added <a href="index.html@popular_alternatives.html">evaluation</a> of the <a href="http://www.cnet.com.au/from-qwerty-to-abkey-240003768.htm">abKey layout</a>. Its alphabetic layout makes no attempt at ergonomics. <a href="index.html@keyboard_layouts.html">Detailed statistics</a> are available.
</div>


<h1>
Interpreting Optimization Results
</h1>




<div class=technical>
configuration file : etc/tutorial-06.conf
<br>
output : out/tutorials/06
</div>

<h2>Configuration</h2>

<p>This tutorial picks up where the <a href="index.html@concurrent_optimization.html">concurrent optimization</a> tutorial
left off. Once you have collected a large number of output files (out/tutorials/04), one
for each optimization instance, and identified the best-ranking
candidates, you will probably want to generate images and reports for
the layout candidates.

<p>First, I'll set up what I want carpalx to do in the action string:
draw the input keyboard, report statistics and word efforts. Also,
I'll make a small adjustment to the output file name for the PNG
image, and make it a function of the input keyboard_input (e.g. the
keyboard in tmp-zjqgub.conf will be drawn as tmp-zjqgub.png).

<pre>
...
action  = loadkeyboard,loadtriads,drawinputkeyboard,reporteffort,reportwordeffort,quit
...
pngfile_keyboard_input  = /home/martink/work/carpalx/dev/out/tutorials/06/__basename($CONF{keyboard_input},".conf")__.png
...
</pre>

<h2>drawing keyboards</h3>

<p>I can specify the keyboard_input file on the command line. However
this needs to be specified relative to the main configuration file
(i.e. relative to etc/).

<pre>
> bin/carpalx -conf etc/tutorial-06.conf -keyboard_input out/tutorials/04/tmp-oovxkx.conf > out/tutorials/06/out.txt
</pre>




<div class="image" style="width: 434">
<img  src="images/tutorial-06-01.png">
<div class="caption"><b>Figure 1</b> | Lowest effort layout from tutorial 04.</div>
</div>


<p>If you desire a more elaborate keyboard image, try the image parameters predefined as set 2.

<pre>
...
imagedetaillevel = 2
imageparamset    = 2
...
</pre>




<div class="image" style="width: 20">
<img  src="http://mkweb.bcgsc.ca/carpalx/images/tutorial-06-02.png">
<div class="caption"><b>Figure 2</b> | Lowest effort layout from tutorial 04.</div>
</div>


<div class=technical>
If you don't get the relative path right, carpalx will complain. For example if you use -keyboard_input out/tutorials/04/tmp-oovxkx.conf, the following message will appear
<br><br>
cannot file keyboard definition - /home/martink/work/perl/keyboard/carpalx-0.10/etc/out/tutorials/04/tmp-oovxkx.conf at bin/carpalx line 1453.
<br><br>
Based on the message, it's easy to correct the input path.
</div>

<h2>investigation effort components</h2>

<p>The out/tutorials/06/out.txt file that we created above contains detailed information about effort of the best candidate, as well as statistics about finger and row usage.

<pre>
Keyboard effort
------------------------------------------------------------
k1                      0.719  80.9  80.9
k1,k2                   0.871  17.1  97.9
k1,k2,k3                0.889   2.1 100.0
b                       0.392  23.1  23.1
p                       0.497  29.3 178.9
ph                      0.000   0.0   0.0
pr                      0.167  33.5  33.5
pf                      0.283  57.0  90.5
s                       0.808  47.6 100.0
all                     1.697 100.0 100.0
</pre>

<p>Look at the first column of numbers in the rows labeled b, p and s. These are the base, penalty and stroke efforts for the layout. The total energy is 1.697, and the components break down as 0.392 (base), 0.497 (penalty) and 0.808 (stroke). 

<p>Let's look at the finger frequency

<pre>
keyboard finger frequency
------------------------------------------------------------
0                       10738  5.7   5.7
1                       19640 10.4  16.1
2                       23312 12.3  28.4
3                       41076 21.7  50.1
6                       51342 27.2  77.3
7                       27456 14.5  91.8
8                       15136  8.0  99.8
9                         323  0.2 100.0
</pre>

<p>The left pinky is used 5.7% of the time and the right pinky 0.2% of the time. 

<h2>investigating the optimization process</h2>

<p>If you capture the output of carpalx to an output file during
optimization, you can return to this file and explore the course of
effort during optimization. Below are a few plots of the layout effort
for each iteration in a simulation of 10,000 iterations. These plots were generated using an old effort model, so the effort values are high.




<div class="image" style="width: 620">
<img  src="images/tmp-oovxkx-plot-1.png">
<div class="caption"><b>Figure 3</b> | Layout typing effort during optimization. The red line traces the effort of accepted transitions.</div>
</div>





<div class="image" style="width: 620">
<img  src="images/tmp-oovxkx-plot-2.png">
<div class="caption"><b>Figure 4</b> | Effort change during accepted transitions during layout optimization. During the initial phase of the optimization both positive (worse) and negative (better) effort changes are accepted. Towards the end of the optimization, only desirable transitions (lower in effort) are accepted and, infrequently, marginally worse layouts.</div>
</div>





<div class="image" style="width: 620">
<img  src="images/tmp-oovxkx-plot-3.png">
<div class="caption"><b>Figure 5</b> | Cooling schedule for the optimization. As the optimization runs, the probability of accepting a less desirable layout exponentially decreases.</div>
</div>


<!--




<div class="image" style="width: 650">
<img  src="images/tmp-input-arvfos.png">
<div class="caption"><b>Figure 6</b> | Input keyboard (QWERTY) to the optimization process.</div>
</div>




<div class="pullrimg" style="width: 434">
<img  src="images/qfcdmx.png">
<div class="caption"><b>Figure 7</b> | An fully optimized keyboard layout, trained on Alice in Wonderland. The effort of this <a href='?english_easiest#qfcdm'>QFCDM layout</a> is 43% lower (2.86) than for the QWERTY layout (5.06).</div>
</div>


-->




<br clear=both>
</div>



<div id="copyright">
Carpalx | keyboard layout optimizer | <a href="http://mkweb.bcgsc.ca/carpalx">home</a> | &copy; 2005-2014 <a href="mailto:martink@bcgsc.ca">Martin Krzywinski</a> | <a href="http://mkweb.bcgsc.ca">other projects</a>
</div>

</div>

</div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-10760878-1");
pageTracker._trackPageview();
} catch(err) {}</script>

</body>
</html>


