
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose
.dtd">
<html>
<head>
<link rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="css/style2.css" type="text/css">
<meta name="keywords" content="keyboard, layout, typing, effort, qwerty, dvorak, colemak, arensito, capewell, best layout, worst layout, custom layout, simulated annealing, monte carlo, simulation">
<title>Carpalx - keyboard layout optimizer</title>

<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:400,700,800|PT+Serif:400,400italic,700|Inconsolata:400,700">

</head>

<body>

<div id="body">

<div id="page">

<div id="masthead">
<a href="index.html"><img src="images/carpalx-logo-v3-crop.png" alt="carpalx - keyboard layout optimizer - save your carpals"></a>
</div>


<div id="leftpane">

<div id="slogan">



<p>Carpalx optimizes keyboard layouts to create ones that require less effort and significantly reduced carpal strain!

<p><a href="index.html@full_optimization.html"><img src="images/carpalx-ourbest.png"></a>
<p><a href="index.html@worst_layout.html"><img src="images/carpalx-ourworst.png"></a>

<p><img src="images/download.png" style="float:left; padding: 0 0.25em 0 0;"><a href="index.html@download.html">Download keyboard layouts</a>, or <a href="index.html@requirements.html">run the code yourself</a> to explore new layouts.

<p><img src="images/x.png" style="float:left; padding: 0 0.25em 0 0;"><b>X11 layouts are available!</b> Patches to include Carpalx layouts in <a href="https://www.freedesktop.org/wiki/Software/XKeyboardConfig/">xkeyboard-config</a> and <a href="http://kbd-project.org/">kbd</a> have been submitted by Perry Thompson. Meanwhile, many thanks to Sven Hallberg for providing <a href="http://www.khjk.org/log/2011/jan/carpalx.html">X11 configuration for Carpalx layouts</a>. Richard Gomes contributed an <a href="http://mkweb.bcgsc.ca/carpalx/distribution/carpalx-x11.zip">archive of these files</a> for KDE/Gnome users. 

<p><img src="images/happy.png" style="float:left; padding: 0 0.25em 0 0;">Love your coworkers? Switch them to <a href="index.html@partial_optimization.html">QWKRFY</a> layout or a fully optimized <a href="index.html@full_optimization.html">QGMLWY</a> layout.

<p><img src="images/sad.png" style="float:left; padding: 0 0.25em 0 0;">Hate your coworkers? Switch them to  <a href="index.html@worst_layout.html">TNWMLC</a> layout. It's the only keyboard layout that has its <a href="http://fashionnotebook.wordpress.com/2011/01/04/julia-valle-tnwmlc/">own fashion line</a>.

<p>Have ideas? <a href="mailto:martin.krzywinski@gmail.com">Tell me</a>.

</div>

<div id="menu">


<h1>carpalx</h1>
<a href="index.html@home.html">home</a>
<a href="index.html@about.html">about</a>
<a href="index.html@typing_effort.html">typing effort</a>
<a href="index.html@model_parameters.html">model parameters</a>
<a href="index.html@keyboard_evaluation.html">keyboard evaluation</a>
<a href="index.html@keyboard_layouts.html">keyboard layouts</a>
<h1>case studies</h1>
<a href="index.html@qwerty.html">QWERTY</a>
<a href="index.html@dvorak.html">Dvorak</a>
<a href="index.html@colemak.html">Colemak</a>
<a href="index.html@popular_alternatives.html">Popular alternatives</a>
<h1>optimization</h1>
<a href="index.html@partial_optimization.html">Partial optimization</a>
<a href="index.html@full_optimization.html">Full optimization</a>
<a href="index.html@worst_layout.html">Worst Layout</a>
<a href="index.html@component_optimization.html">Component optimization</a>
<a href="index.html@improving_colemak.html">Improving colemak</a>
<a href="index.html@de_correspondent.html">De Correspondent</a>
<h1>tutorials</h1>
<a href="index.html@simulated_annealing.html">simulated annealing</a>
<a class=current href="index.html@carpalx_installation.html">carpalx installation</a>
<a href="index.html@keyboard_statistics.html">keyboard statistics</a>
<a href="index.html@word_statistics.html">word statistics</a>
<a href="index.html@basic_optimization.html">basic optimization</a>
<a href="index.html@concurrent_optimization.html">concurrent optimization</a>
<a href="index.html@keyboard_images.html">keyboard images</a>
<a href="index.html@interpreting_optimization.html">interpreting optimization</a>
<h1>documentation</h1>
<a href="index.html@readme.html">README</a>
<a href="index.html@changes.html">CHANGES</a>
<a href="index.html@man_page.html">man page</a>
<h1>download</h1>
<a href="index.html@requirements.html">requirements</a>
<a href="index.html@download.html">download</a>
<h1>author</h1>
<a href="index.html@contact.html">contact</a>
<a href="index.html@other_projects.html">other projects</a>




</div>


<div id="footer">
Carpalx is licensed under GPL. It is free, freely distributable and yours to modify under the auspices of the GPL license.


</div>
</div>

<div id="rightpane">




<div class=update>
<p>16/aug/16 &mdash; <a href="http://link.springer.com/chapter/10.1007/978-3-319-41694-6_41">Ergonomic Keyboard Layout Designed for the Filipino Language</a> at <a href="http://www.ahfe2016.org/program1.html">AHFE2016</a> derives layout for Filipino language using Carpalx 
<p>18/apr/16 &mdash; Carpalx layouts soon to appear in freedesktop (package xkeyboard-config) and kbd. Thanks to Perry Thompson.
<p>9/sep/14 &mdash; A new layout&mdash;<a href="index.html@de_correspondent.html">De Correspondent</a>&mdash;for the Dutch language in collaboration with <a href="https://decorrespondent.nl/en">De Correspondent</a>.
<p>16/may/14 &mdash; Added <a href="index.html@full_optimization.html">evaluation</a> of the <a href="http://www.normanlayout.info">Norman layout</a>. This layout modifies 14/26 keys and has statistics similar to Colemak. <a href="index.html@keyboard_layouts.html">Detailed statistics</a> are available.
<p>12/feb/14 &mdash; Added <a href="index.html@popular_alternatives.html">evaluation</a> of the <a href="http://www.cnet.com.au/from-qwerty-to-abkey-240003768.htm">abKey layout</a>. Its alphabetic layout makes no attempt at ergonomics. <a href="index.html@keyboard_layouts.html">Detailed statistics</a> are available.
</div>


<h1>
Installing Carpalx
</h1>




<div class=technical>
configuration file : etc/tutorial-00.conf
<br>
output : out/tutorials/00
</div>

<h2>Configuration</h2>

<p>Let's skip the configuration details for now, and see whether things work.

<p>First, change the first line of bin/carpalx if you want to use a specific perl binary. Otherwise, the perl binary in your path will be used.

<pre>
#!/usr/bin/env perl
</pre>

<p>Now you should be able to check that you can see the manpage.

<pre>
bin/carpalx -man
</pre>

<p>If you get an error of this type

<pre>
Can't locate Set/IntSpan.pm in @INC (@INC contains: /home/martink/perl/5.8.7/lib/5.8.7/i686-linux-ld 
/home/martink/perl/5.8.7/lib/5.8.7 /home/martink/perl/5.8.7/lib/site_perl/5.8.7/i686-linux-ld 
/home/martink/perl/5.8.7/lib/site_perl/5.8.7 /home/martink/perl/5.8.7/lib/site_perl .) 
at bin/carpalx line 163.
BEGIN failed--compilation aborted at bin/carpalx line 163.
</pre>

<p>then you do not have the module Set::IntSpan (or whatever carpalx
complains about) in your module path. Possibly, you do not have the
module installed. 

<p>To install a module try using CPAN first. Here make sure you're using the perl binary that will be used to run carpalx (e.g. /usr/bin/perl).

<pre>
> /usr/bin/perl -MCPAN -e shell

cpan> install Set::IntSpan
cpan> quit
</pre>

<p>If you have the module installed but need to add its path to the module path so that Perl can find it, you can either

<ul>
<li>add -I/path/to/module flag to the first line of carpalx (e.g. #!/usr/bin/perl -I/path/to/module)
<li>add path to PERL5LIB environment variable
<li>add use lib "/path/to/module" in carpalx, right after the "use strict" line.
</ul>

<h2>quick and dirty optimization</h2>

<p>Assuming you can see the manpage, try running a fast optimization of QWERTY over 100 iterations. 

<pre>
> bin/carpalx -conf etc/tutorial-00.conf > out/tutorials/00/out.txt
</pre>

<p>I've redirected the output to out/tutorials/00/out.txt for
review. This output will contain the effort summary of the initial
keyboard state (QWERTY), reports for each iteration, and the effort
summary of the final optimized state. The contents of the output will
be the results of the steps carried out in the 'action' parameter. For this tutorial, the action parameter was 

<pre>
action  = loadkeyboard,loadtriads,
          drawinputkeyboard,reporteffortverybrief,
	  optimize,
	  drawoutputkeyboard,reporteffortverybrief,
	  quit
</pre>

<p>Output files (keyboard images and final configuration) will be
written to out/tutorials/00, as controlled by the keyboard_output and
pngfiles_* parameters. The files will be marked with a random 6
character string to avoid overwriting previous output (defined by the
dynamically assigned runid parameter in the configuration file).

<p>In my case, I obtain the following optimization after 100
iterations. The effort of the final layout is 1.899, which is
significantly lower than the effort of the initial QWERTY state
(2.962). In other words, significant improvement has already been made
in a very short simulation.

<pre>

# out/tutorials/00/tmp-phpzca.conf

&lt;current_parameters&gt;
iter               = 100
effort             = 2.16825701504727372
deffort            = 0.405960215518077932
update_count       = 54
t                  = 0.000453999297624848515
&lt;/current_parameters&gt;

&lt;annealing_parameters&gt;
t0                 = 10
k                  = 10
maxswaps           = 2
p0                 = 1
action             = minimize
iterations         = 100
onestep            = 0
minswaps           = 1
&lt;/annealing_parameters&gt;

&lt;keyboard&gt;
&lt;row 1&gt;
keys = `~ 1! 2@ 3\# 4$ 5% 6^ 7& 8* 9( 0) -_ =+
fingers  = 0 1 1 2 3 3 3 6 7 7 8 9 9
&lt;/row&gt;
&lt;row 2&gt;
keys = b q n r g m s f x y [{ ]} \|
fingers  = 0 1 2 3 3 6 6 7 8 9 9 9 9
&lt;/row&gt;
&lt;row 3&gt;
keys = d h e t l o u i a ;: '"
fingers  = 0 1 2 3 3 6 6 7 8 9 9
&lt;/row&gt;
&lt;row 4&gt;
keys = j z c w p v k ,< .> /?
fingers  = 0 1 2 3 3 6 6 7 8 9
&lt;/row&gt;
&lt;/keyboard&gt;

</pre>

<p>If you run carpalx again with the same command, you'll find that a
different set of files was written to out/tutorials/00. You can run
the simulation many times (and on multiple cores or CPUs) and not
worry that the output files will clobber one another (while it's
possible, it's very unlikely).

<p>The output keyboard file (tmp-phpzca.conf above) can be used as an
input file to continue the optimization.




<br clear=both>
</div>



<div id="copyright">
Carpalx | keyboard layout optimizer | <a href="http://mkweb.bcgsc.ca/carpalx">home</a> | &copy; 2005-2014 <a href="mailto:martink@bcgsc.ca">Martin Krzywinski</a> | <a href="http://mkweb.bcgsc.ca">other projects</a>
</div>

</div>

</div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-10760878-1");
pageTracker._trackPageview();
} catch(err) {}</script>

</body>
</html>


