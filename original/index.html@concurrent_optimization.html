
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose
.dtd">
<html>
<head>
<link rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="css/style2.css" type="text/css">
<meta name="keywords" content="keyboard, layout, typing, effort, qwerty, dvorak, colemak, arensito, capewell, best layout, worst layout, custom layout, simulated annealing, monte carlo, simulation">
<title>Carpalx - keyboard layout optimizer</title>

<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:400,700,800|PT+Serif:400,400italic,700|Inconsolata:400,700">

</head>

<body>

<div id="body">

<div id="page">

<div id="masthead">
<a href="index.html@.html"><img src="images/carpalx-logo-v3-crop.png" alt="carpalx - keyboard layout optimizer - save your carpals"></a>
</div>


<div id="leftpane">

<div id="slogan">



<p>Carpalx optimizes keyboard layouts to create ones that require less effort and significantly reduced carpal strain!

<p><a href="index.html@full_optimization.html"><img src="images/carpalx-ourbest.png"></a>
<p><a href="index.html@worst_layout.html"><img src="images/carpalx-ourworst.png"></a>

<p><img src="images/download.png" style="float:left; padding: 0 0.25em 0 0;"><a href="index.html@download.html">Download keyboard layouts</a>, or <a href="index.html@requirements.html">run the code yourself</a> to explore new layouts.

<p><img src="images/x.png" style="float:left; padding: 0 0.25em 0 0;"><b>X11 layouts are available!</b> Patches to include Carpalx layouts in <a href="https://www.freedesktop.org/wiki/Software/XKeyboardConfig/">xkeyboard-config</a> and <a href="http://kbd-project.org/">kbd</a> have been submitted by Perry Thompson. Meanwhile, many thanks to Sven Hallberg for providing <a href="http://www.khjk.org/log/2011/jan/carpalx.html">X11 configuration for Carpalx layouts</a>. Richard Gomes contributed an <a href="http://mkweb.bcgsc.ca/carpalx/distribution/carpalx-x11.zip">archive of these files</a> for KDE/Gnome users. 

<p><img src="images/happy.png" style="float:left; padding: 0 0.25em 0 0;">Love your coworkers? Switch them to <a href="index.html@partial_optimization.html">QWKRFY</a> layout or a fully optimized <a href="index.html@full_optimization.html">QGMLWY</a> layout.

<p><img src="images/sad.png" style="float:left; padding: 0 0.25em 0 0;">Hate your coworkers? Switch them to  <a href="index.html@worst_layout.html">TNWMLC</a> layout. It's the only keyboard layout that has its <a href="http://fashionnotebook.wordpress.com/2011/01/04/julia-valle-tnwmlc/">own fashion line</a>.

<p>Have ideas? <a href="mailto:martin.krzywinski@gmail.com">Tell me</a>.

</div>

<div id="menu">


<h1>carpalx</h1>
<a href="index.html@home.html">home</a>
<a href="index.html@about.html">about</a>
<a href="index.html@typing_effort.html">typing effort</a>
<a href="index.html@model_parameters.html">model parameters</a>
<a href="index.html@keyboard_evaluation.html">keyboard evaluation</a>
<a href="index.html@keyboard_layouts.html">keyboard layouts</a>
<h1>case studies</h1>
<a href="index.html@qwerty.html">QWERTY</a>
<a href="index.html@dvorak.html">Dvorak</a>
<a href="index.html@colemak.html">Colemak</a>
<a href="index.html@popular_alternatives.html">Popular alternatives</a>
<h1>optimization</h1>
<a href="index.html@partial_optimization.html">Partial optimization</a>
<a href="index.html@full_optimization.html">Full optimization</a>
<a href="index.html@worst_layout.html">Worst Layout</a>
<a href="index.html@component_optimization.html">Component optimization</a>
<a href="index.html@improving_colemak.html">Improving colemak</a>
<a href="index.html@de_correspondent.html">De Correspondent</a>
<h1>tutorials</h1>
<a href="index.html@simulated_annealing.html">simulated annealing</a>
<a href="index.html@carpalx_installation.html">carpalx installation</a>
<a href="index.html@keyboard_statistics.html">keyboard statistics</a>
<a href="index.html@word_statistics.html">word statistics</a>
<a href="index.html@basic_optimization.html">basic optimization</a>
<a class=current href="index.html@concurrent_optimization.html">concurrent optimization</a>
<a href="index.html@keyboard_images.html">keyboard images</a>
<a href="index.html@interpreting_optimization.html">interpreting optimization</a>
<h1>documentation</h1>
<a href="index.html@readme.html">README</a>
<a href="index.html@changes.html">CHANGES</a>
<a href="index.html@man_page.html">man page</a>
<h1>download</h1>
<a href="index.html@requirements.html">requirements</a>
<a href="index.html@download.html">download</a>
<h1>author</h1>
<a href="index.html@contact.html">contact</a>
<a href="index.html@other_projects.html">other projects</a>




</div>


<div id="footer">
Carpalx is licensed under GPL. It is free, freely distributable and yours to modify under the auspices of the GPL license.


</div>
</div>

<div id="rightpane">




<div class=update>
<p>16/aug/16 &mdash; <a href="http://link.springer.com/chapter/10.1007/978-3-319-41694-6_41">Ergonomic Keyboard Layout Designed for the Filipino Language</a> at <a href="http://www.ahfe2016.org/program1.html">AHFE2016</a> derives layout for Filipino language using Carpalx 
<p>18/apr/16 &mdash; Carpalx layouts soon to appear in freedesktop (package xkeyboard-config) and kbd. Thanks to Perry Thompson.
<p>9/sep/14 &mdash; A new layout&mdash;<a href="index.html@de_correspondent.html">De Correspondent</a>&mdash;for the Dutch language in collaboration with <a href="https://decorrespondent.nl/en">De Correspondent</a>.
<p>16/may/14 &mdash; Added <a href="index.html@full_optimization.html">evaluation</a> of the <a href="http://www.normanlayout.info">Norman layout</a>. This layout modifies 14/26 keys and has statistics similar to Colemak. <a href="index.html@keyboard_layouts.html">Detailed statistics</a> are available.
<p>12/feb/14 &mdash; Added <a href="index.html@popular_alternatives.html">evaluation</a> of the <a href="http://www.cnet.com.au/from-qwerty-to-abkey-240003768.htm">abKey layout</a>. Its alphabetic layout makes no attempt at ergonomics. <a href="index.html@keyboard_layouts.html">Detailed statistics</a> are available.
</div>


<h1>
Concurrent Optimization - Parallelizing Layout Search
</h1>




<div class=technical>
configuration file : etc/tutorial-04.conf
<br>
output : out/tutorials/04
</div>

<h2>Configuration</h2>

<p>If you have multiple CPUs you can run carpalx multiple times to increase the likelihood of finding the best layout for your parameter set. The only caveat is to set the output file names to unique values for each run, so that concurrent instances of carpalx do not overwrite each others files.

<p>To do this, I usually set a runid parameter in the configuration file to a random string (parsed and evaluated at run-time) and then concatenate this string to all output files.

<pre>
...
runid = __join("", map { chr(97+rand(26)) } (0..5))__
...
keyboard_output = /home/martink/work/carpalx/dev/out/tutorials/04/tmp-__$CONF{runid}__.conf
...
keyboard_output_show_parameters = current,annealing
...
</pre>

<p>If you flank configuration values with "__" (e.g. __2+2__), the string between the __ delimiters will be evaluated before it is assigned to a variable. Thus, runid will be random 6 character string and the value of keyboard_output will have this value embedded. The likelihood of two instances having the same value is negligibly small.

<p>In this example, I ran 100 instances of carpalx. Each instance
optimized over 1,000 iterations. It is very important to include the
current parameters in the output file so that you can determine the
best candidate.

<h2>results</h2>

<p>After the runs are done, I have 100 output files of the form tmp-xxxxxx.conf in the output directory.

<pre>
> cd /home/martink/work/carpalx/dev/out/tutorials/04
> ls
...
-rw-r--r--  1 martink users 825 Aug 13 17:06 tmp-aedfne.conf
-rw-r--r--  1 martink users 826 Aug 13 17:06 tmp-alxgbj.conf
-rw-r--r--  1 martink users 829 Aug 13 17:06 tmp-bhlypi.conf
-rw-r--r--  1 martink users 827 Aug 13 17:06 tmp-bwukea.conf
-rw-r--r--  1 martink users 825 Aug 13 17:06 tmp-cuovlg.conf
-rw-r--r--  1 martink users 829 Aug 13 17:06 tmp-ddlrja.conf
-rw-r--r--  1 martink users 825 Aug 13 17:06 tmp-dfplfh.conf
...
</pre>

<p>To list the solutions with the 5 lowest efforts, 

<pre>
> grep ^effort * | sort -n +2 -3 | head -5
tmp-zjqgub.conf:effort             = 1.69679625336239785
tmp-taefqt.conf:effort             = 1.71535465610664482
tmp-hwlnsw.conf:effort             = 1.72057806732281894
tmp-ezikjb.conf:effort             = 1.72235159706217446
tmp-ejtrhx.conf:effort             = 1.725622120225492
</pre>

<p>Out of the 100 iterations, final typing efforts range from 1.697 to
2.598. The top layout is in tmp-zjqgub.conf with a final typing effort
of 1.697.

<pre>
z y u l b c d g f q [{ ]} \|
 r i a o h n t e s ;: '"
  x v k p j m w ,< .> /?
</pre>

<!--
<div class=technical>
</div>
-->

<!--




<div class="image" style="width: 650">
<img  src="images/tmp-input-arvfos.png">
<div class="caption"><b>Figure 1</b> | Input keyboard (QWERTY) to the optimization process.</div>
</div>




<div class="pullrimg" style="width: 434">
<img  src="images/qfcdmx.png">
<div class="caption"><b>Figure 2</b> | An fully optimized keyboard layout, trained on Alice in Wonderland. The effort of this <a href='?english_easiest#qfcdm'>QFCDM layout</a> is 43% lower (2.86) than for the QWERTY layout (5.06).</div>
</div>


-->




<br clear=both>
</div>



<div id="copyright">
Carpalx | keyboard layout optimizer | <a href="http://mkweb.bcgsc.ca/carpalx">home</a> | &copy; 2005-2014 <a href="mailto:martink@bcgsc.ca">Martin Krzywinski</a> | <a href="http://mkweb.bcgsc.ca">other projects</a>
</div>

</div>

</div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-10760878-1");
pageTracker._trackPageview();
} catch(err) {}</script>

</body>
</html>


